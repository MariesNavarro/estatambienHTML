"use strict";function _(o){return document.querySelector(o)}function __(o){return document.querySelectorAll(o)}window.console.log("%cCoded by Oet Capital","color:#fff;  font-size: 10px; background:#000; padding:20px;"),window.performance=window.performance||{},window.performance.now=performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return(new Date).getTime()},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(o){window.setTimeout(o,1e3/60)};var cupon=_("#cupon1"),interno=0,cB=!1,w=window.innerWidth,aRestar=50,wrSocial=__(".socialWidth"),btSocial=__(".whatsapp");function initFront(){_("#blk").style.backgroundImage="url('ui/img/blank.png')";var o,e,n=12,t=[],i=_("#buttonHome");!function(){if((bowser.mobile||bowser.tablet||/SymbianOS/.test(window.navigator.userAgent))&&(cB=!0),cB){for(var o=0;o<wrSocial.length;o++)wrSocial[o].style.width="170px";for(o=0;o<btSocial.length;o++)btSocial[o].style.display="block";fixHeight(),i.addEventListener("touchstart",u),l("ui/img/seqHome/mob-",".jpg",29,"home")}else i.addEventListener("click",u),w<960?l("ui/img/seqHome/mob-",".jpg",29,"home"):l("ui/img/seqHome/desk-",".jpg",28,"home")}();function a(o,e,n,t){for(var i,a=_(t),r=n;r>=0;r--)(i=document.createElement("DIV")).setAttribute("class","frame"),i.style.backgroundImage="url('"+o+r+e+"')",a.appendChild(i)}function r(){var e=__(".frame"),t=_("#menu"),a=_("#footer");e[o].style.display="none",e[o].setAttribute("class","remove"),0!==--o&&setTimeout(function(){requestAnimationFrame(r)},1e3/n),2===o&&(i.setAttribute("class","buttonG scaleUpButtonAnimation"),setTimeout(function(){i.setAttribute("class","buttonG scaleUpButtonDefault trans3")},1200)),0===o&&(a.style.opacity="1",t.style.opacity="1",function(){for(var o=__(".remove"),e=0;e<o.length;e++)o[e].parentNode.removeChild(o[e]);var n=__(".frame");n[0].setAttribute("id","seqHome"),n[0].setAttribute("style"," "),n[0].setAttribute("class"," ")}())}function s(){var o=__(".frame");o[e].style.display="none",o[e].setAttribute("class","remove"),0!==--e&&setTimeout(function(){requestAnimationFrame(s)},1e3/n)}function u(){_("#stateText").innerHTML="Cargando Cup贸n...",_("#carrusel").style.display="none",_("#loadCoupon1>.wrap").style.opacity="1";setTimeout(function(){s()},700),obtencupon()}function l(n,i,s,u){"home"===u?o=s:e=s;for(var c=0,p=0;p<s;p++)t[p]=new XMLHttpRequest,t[p].open("GET",n+p+i,!0),t[p].responseType="blob",t[p].onload=function(o){var e,t,p,d,m;4==this.readyState&&(++c===s&&"home"===u?(e=n,t=i,p=s,d=_("#loading"),m=_("#producto1>.wrap"),a(e,t,p,"#producto1>.wrap"),setTimeout(function(){d.style.opacity=0,setTimeout(function(){d.style.display="none",m.style.opacity="1",requestAnimationFrame(r)},1e3)},2e3),!0===cB?l("ui/img/seqLoadCoupon/mob-",".jpg",26,"coupon"):!1===cB&&w<960?l("ui/img/seqLoadCoupon/mob-",".jpg",26,"coupon"):!1===cB&&w>=960&&l("ui/img/seqLoadCoupon/desk-",".jpg",26,"coupon")):c===s&&"coupon"===u&&a(n,i,s,"#loadCoupon1>.wrap"))},t[p].send()}}function handleSizeCoupon(o){cB?cupon.style.backgroundImage="url('ui/img/promoMob-"+interno+".jpg')":!1===cB&&o<960?cupon.style.backgroundImage="url('ui/img/promoMob-"+interno+".jpg')":!1===cB&&o>=960&&(cupon.style.backgroundImage="url('ui/img/promoDesk-"+interno+".jpg')")}function generateCoupon(o){interno=o,cB?cupon.style.backgroundImage="url('ui/img/promoMob-"+interno+".jpg')":!cB&&w<960?cupon.style.backgroundImage="url('ui/img/promoMob-"+interno+".jpg')":!cB&&w>=960&&(cupon.style.backgroundImage="url('ui/img/promoDesk-"+interno+".jpg')")}function horasDisplay(o){var e=_("#horasDiv");if("displayBlock"===o){_("#stateText").innerHTML=" ";e.style.display="block"}else{_("#stateText").innerHTML="Cup贸n Listo";displayCoupon(),e.style.display="none"}}function agotadoDisplay(o){var e=_("#agotadoDiv");if("displayBlock"===o){_("#stateText").innerHTML=" ";e.style.display="block"}else{_("#stateText").innerHTML="Cup贸n Listo";displayCoupon(),e.style.display="none"}}function loadingCoupon(o){var e=_("#generandocupon"),n=0,t=_("#counter>p"),i=_("#ccircleW"),a=-i.getTotalLength(),r=setInterval(function(){n++,(a+=3.2999804878)>=0&&(a=0),i.style.strokeDashoffset=a,t.innerHTML=n,100===n&&(clearInterval(r),setTimeout(function(){if(e.style.opacity="0",setTimeout(function(){e.style.display="none"},800),"VUELVE"===o)horasDisplay("displayBlock");else if("AGOTADO"===o){horasDisplay("displayNone");_("#cupon").style.display="none";agotadoDisplay("displayBlock")}else{generateCoupon(o);var n="";cB?n="ui/img/promoMob-"+o+".jpg":!cB&&w<960?n="ui/img/promoMob-"+o+".jpg":!cB&&w>=960&&(n="ui/img/promoDesk-"+o+".jpg"),toDataURL(n,function(o){console.log("RESULT:",o);var e=_("#download");e.download="cupon.jpg",e.href=n,e.target="_blank"}),horasDisplay("displayNone")}},2e3))},10)}function fixHeight(){var o;o=.2*window.innerHeight+50,buttonHome.style.bottom=o+"px"}function displayCoupon(){_("#cupon").style.display="block",_("#blk").style.backgroundImage="url('ui/img/oxxo_logotipo.png')"}function savedCoupon(){_("#cupon").style.display="none",_("#guardado").style.display="block",_("#stateText").innerHTML="Cup贸n Guardado Exitosamente",_("#blk").style.backgroundImage="url('ui/img/blank.png')"}window.onorientationchange=function(){var o=_("#preventLandscape");90==window.orientation||-90==window.orientation?o.setAttribute("class","flexDisplay"):o.setAttribute("class","dislplayNone")},window.onresize=function(){cB&&fixHeight(),handleSizeCoupon(window.innerWidth)};
